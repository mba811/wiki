<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>sphinx学习笔记 - Wiki · Tsong khapa</title>
    <meta name="keywords" content="simiki, wiki, python, simple"/>
    <meta name="description" content="Tanky Woo's personal wiki, powered by vim and markdown. Focus on Python, C/C++, Linux, Ops-Dev, Gentoo, and so on."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#Python">Python</a>&nbsp;&#187;&nbsp;sphinx学习笔记
    <span class="updated">Page Updated&nbsp;
      2015-05-07 21:49
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">sphinx学习笔记</div>

  <p>最近学习的东西比较多，这不又折腾到了sphinx，装了一下，果然，niubility。</p>
<p>以前以为python官方文档是自己动手写的，没想到····是这货生成的。</p>
<p>好吧，我又孤陋寡闻了。</p>
<h2 id="_1">简介：</h2>
<p>Sphinx 是一种工具，它允许开发人员以纯文本格式编写文档，以便采用满足不同需求的格式轻松生成输出。这在使用 Version Control System 追踪变更时非常有用。纯文本文档对不同系统之间的协作者也非常有用。纯文本是当前可以采用的最便捷的格式之一。</p>
<p>虽然 Sphinx 是用 Python 编写的，并且最初是为 Python 语言文档而创建，但它并不一定是以语言为中心，在某些情况下，甚至不是以程序员为中心。Sphinx 有许多用处，比如可以用它来编写整本书！</p>
<p>突出显示</p>
<p>默认情况下，Sphinx 会为 Python 突出显示代码，但它还允许定义其他编程语言，比如 C 和 Ruby。</p>
<p>可以将 Sphinx 想像成为一种_文档框架_：它会抽象化比较单调的部分，并提供自动函数来解决一些常见问题，比如突出显示标题索引和特殊代码（在显示代码示例时），以及突出显示适当的语法。</p>
<h2 id="_2">语法：</h2>
<p>Sphinx 使用 reStructuredText 标记语法（和其他一些语法）来提供文档控制。如果您之前编写过纯文本文件，那么您可能非常了解精通 Sphinx 所需的语法。 </p>
<p>关于rst，上一节刚刚学习了一下。可以过去看一下~  <a href="http://lazynight.me/3138.html">http://lazynight.me/3138.</a></p>
<h2 id="_3">安装：</h2>
<p>pip install sphinx啦~~~</p>
<h2 id="_4">新建工程：</h2>
<p>随便找个空目录：</p>
<p>运行命令：sphinx-quickstart</p>
<p>会提示让你输入一些比如项目名称啊，作者啊，目录地址啊之类的</p>
<p>大多数只需要回车就好了。</p>
<p>╭─@localhost ~/z/pj/sphinx<br />
╰─ sphinx-quickstart<br />
Welcome to the Sphinx 1.1.3 quickstart utility.</p>
<p>Please enter values for the following settings (just press Enter to<br />
accept a default value, if one is given in brackets).</p>
<p>Enter the root path for documentation.  </p>
<blockquote>
<p>Root path for the documentation [.]:</p>
</blockquote>
<p>You have two options for placing the build directory for Sphinx output.<br />
Either, you use a directory “_build” within the root path, or you separate<br />
“source” and “build” directories within the root path.  </p>
<blockquote>
<p>Separate source and build directories (y/N) [n]: y</p>
</blockquote>
<p>Inside the root directory, two more directories will be created; “_templates”<br />
for custom HTML templates and “_static” for custom stylesheets and other static<br />
files. You can enter another prefix (such as “.”) to replace the underscore.  </p>
<blockquote>
<p>Name prefix for templates and static dir [_]:</p>
</blockquote>
<p>The project name will occur in several places in the built documentation.  </p>
<blockquote>
<p>Project name: lazynight<br />
Author name(s): yuzhe</p>
</blockquote>
<p>Sphinx has the notion of a “version” and a “release” for the<br />
software. Each version can have multiple releases. For example, for<br />
Python the version is something like 2.5 or 3.0, while the release is<br />
something like 2.5.1 or 3.0a1. If you don’t need this dual structure,<br />
just set both to the same value.  </p>
<blockquote>
<p>Project version: 1<br />
Project release <a href="http://lazynight.me/3138.html">1</a>: 1</p>
</blockquote>
<p>The file name suffix for source files. Commonly, this is either “.txt”<br />
or “.rst”. Only files with this suffix are considered documents.  </p>
<blockquote>
<p>Source file suffix [.rst]: .rst</p>
</blockquote>
<p>One document is special in that it is considered the top node of the<br />
“contents tree”, that is, it is the root of the hierarchical structure<br />
of the documents. Normally, this is “index”, but if your “index”<br />
document is a custom template, you can also set this to another filename.  </p>
<blockquote>
<p>Name of your master document (without suffix) [index]:</p>
</blockquote>
<p>Sphinx can also add configuration for epub output:  </p>
<blockquote>
<p>Do you want to use the epub builder (y/N) [n]:</p>
</blockquote>
<p>Please indicate if you want to use one of the following Sphinx extensions:  </p>
<blockquote>
<p>autodoc: automatically insert docstrings from modules (y/N) [n]:<br />
doctest: automatically test code snippets in doctest blocks (y/N) [n]:<br />
intersphinx: link between Sphinx documentation of different projects (y/N) [n]:<br />
todo: write “todo” entries that can be shown or hidden on build (y/N) [n]:<br />
coverage: checks for documentation coverage (y/N) [n]:<br />
pngmath: include math, rendered as PNG images (y/N) [n]:<br />
mathjax: include math, rendered in the browser by MathJax (y/N) [n]:<br />
ifconfig: conditional inclusion of content based on config values (y/N) [n]:<br />
viewcode: include links to the source code of documented Python objects (y/N) [n]:</p>
</blockquote>
<p>A Makefile and a Windows command file can be generated for you so that you<br />
only have to run e.g. `make html’ instead of invoking sphinx-build<br />
directly.  </p>
<blockquote>
<p>Create Makefile? (Y/n) [y]:<br />
Create Windows command file? (Y/n) [y]:</p>
</blockquote>
<p>Creating file ./source/conf.py.<br />
Creating file ./source/index.rst.<br />
Creating file ./Makefile.<br />
Creating file ./make.bat.</p>
<p>Finished: An initial directory structure has been created.</p>
<p>You should now populate your master file ./source/index.rst and create other documentation<br />
source files. Use the Makefile to build the docs, like so:<br />
make builder<br />
where “builder” is one of the supported builders, e.g. html, latex or linkcheck.</p>
<p>╭─@localhost ~/z/pj/sphinx<br />
╰─ ls<br />
Makefile build make.bat source</p>
<p>ok，生成完毕，现在文件夹下有：</p>
<ul>
<li>build目录 运行make命令后，生成的文件都在这个目录里面</li>
<li>source目录 放置文档的源文件</li>
<li>make.bat 批处理命令</li>
<li>makefile </li>
</ul>
<p>生成html：</p>
<p>make html 即可。</p>
<p>─@localhost ~/z/pj/sphinx<br />
╰─ make html<br />
sphinx-build -b html -d build/doctrees source build/html<br />
Making output directory…<br />
Running Sphinx v1.1.3<br />
loading pickled environment… not yet created<br />
building [html]: targets for 1 source files that are out of date<br />
updating environment: 1 added, 0 changed, 0 removed<br />
reading sources… [100%] index<br />
looking for now-outdated files… none found<br />
pickling environment… done<br />
checking consistency… done<br />
preparing documents… done<br />
writing output… [100%] index<br />
writing additional files… genindex search<br />
copying static files… done<br />
dumping search index… done<br />
dumping object inventory… done<br />
build succeeded.</p>
<p>Build finished. The HTML pages are in build/html.</p>
<p><img alt="NewImage" src="http://lazynight.me/wp-content/uploads/2013/11/NewImage.png" /></p>
<p><img alt="NewImage" src="http://lazynight.me/wp-content/uploads/2013/11/NewImage1.png" /></p>
<h2 id="_5">配置：</h2>
<p>source/conf.py</p>
<p>conf.py文件包含了sphinx工程的所有配置选项，包括一些无法在sphinx-quickstart中进行设置的。</p>
<p>下面是一些常用的选项：</p>
<ul>
<li>language （语言）</li>
</ul>
<dl>
<dd>
<p>对应于sphinx的locale目录下的文件夹，里面是本地化配置。</p>
<p>官方版本只支持繁体中文（zh_TW）,可以下载 <a href="http://www.javaeye.com/wiki/topic/299363" target="_blank">sphinx简体中文包</a> （javaEye topman制作）</p>
<p>下载后放到locale目录下，然后language选项修改为zh_CN即可</p>
</dd>
</dl>
<ul>
<li>html_theme （输出html的主题）:</li>
</ul>
<h1 id="the-theme-to-use-for-html-and-html-help-pages-major-themes-that-come-with">The theme to use for HTML and HTML Help pages.  Major themes that come with</h1>
<h1 id="sphinx-are-currently-default-and-sphinxdoc">Sphinx are currently ‘default’ and ‘sphinxdoc’.</h1>
<p>html_theme = ‘sphinxdoc‘</p>
<p>然后在index.rst里写文档啦~或者新建另一个rst</p>
<p><img alt="NewImage" src="http://lazynight.me/wp-content/uploads/2013/11/NewImage2.png" /></p>
<p>ok，还有rst的相关使用方法，去学习一下吧~</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 Tsong khapa.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-10-02 22:54:23</p>
      </span>
    </div>

    
    
  </body>
</html>